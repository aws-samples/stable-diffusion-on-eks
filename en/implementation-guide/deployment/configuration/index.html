
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://aws-samples.github.io/stable-diffusion-on-eks/implementation-guide/deployment/configuration/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../../usage/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Configuration - Stable Diffusion on Amazon EKS</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.bcfcd587.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Stable Diffusion on Amazon EKS" class="md-header__button md-logo" aria-label="Stable Diffusion on Amazon EKS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Stable Diffusion on Amazon EKS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuration
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/stable-diffusion-on-eks/en/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/stable-diffusion-on-eks/zh/" hreflang="zh" class="md-select__link">
              简体中文
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aws-samples/stable-diffusion-on-eks/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    aws-samples/stable-diffusion-on-eks
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../.." class="md-tabs__link">
          
  
  Implementation Guide

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://catalog.us-east-1.prod.workshops.aws/workshops/a7b76c11-8837-4a40-b648-69d1ea4efce0/en-US" class="md-tabs__link">
        
  
    
  
  Hands-on Workshop

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Stable Diffusion on Amazon EKS" class="md-nav__button md-logo" aria-label="Stable Diffusion on Amazon EKS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Stable Diffusion on Amazon EKS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aws-samples/stable-diffusion-on-eks/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    aws-samples/stable-diffusion-on-eks
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Implementation Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Implementation Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1" >
        
          
          <label class="md-nav__link" for="__nav_1_1" id="__nav_1_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Solutions Overview
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_1">
            <span class="md-nav__icon md-icon"></span>
            Solutions Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../solution-overview/cost/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cost estimation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/services-in-this-solution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS Services in the solution
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" checked>
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Deployment
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../considerations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment considerations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick start
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      Infrastructure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Infrastructure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#application-helm-chart" class="md-nav__link">
    <span class="md-ellipsis">
      Application (Helm Chart)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-runtimes" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Runtimes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-model-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic Model Runtime
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_2" >
        
          
          <label class="md-nav__link" for="__nav_1_4_2" id="__nav_1_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SD Web UI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_2">
            <span class="md-nav__icon md-icon"></span>
            SD Web UI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/text-to-image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Text-to-Image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/image-to-image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image-to-Image
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_3" >
        
          
          <label class="md-nav__link" for="__nav_1_4_3" id="__nav_1_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ComfyUI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_3">
            <span class="md-nav__icon md-icon"></span>
            ComfyUI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/pipeline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pipeline
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/callback/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Notification and callback
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Operation Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            Operation Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operation/kubernetes-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes cluster management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Observability
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            Observability
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../observability/monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../observability/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../observability/tracing.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tracing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uninstall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Uninstallation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_9" >
        
          
          <label class="md-nav__link" for="__nav_1_9" id="__nav_1_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_9">
            <span class="md-nav__icon md-icon"></span>
            Developer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/source/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Source code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer/api-spec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Spec
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release note
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://catalog.us-east-1.prod.workshops.aws/workshops/a7b76c11-8837-4a40-b648-69d1ea4efce0/en-US" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hands-on Workshop
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      Infrastructure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Infrastructure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#application-helm-chart" class="md-nav__link">
    <span class="md-ellipsis">
      Application (Helm Chart)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-runtimes" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Runtimes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-model-runtime" class="md-nav__link">
    <span class="md-ellipsis">
      Dynamic Model Runtime
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="configuration">Configuration</h1>
<h2 id="infrastructure">Infrastructure</h2>
<p>We use config file to customize infrastructure and runtime. By default, the config file name is <code>config.yaml</code>. You can use alternative config file by changing environment variable <code>CDK_CONFIG_PATH</code>.</p>
<p>The following table lists the configurable parameters of CDK template and the default values.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>stackName</code></td>
<td>Name of the stack. The name will be added as a prefix of all resource name.</td>
<td>Yes</td>
<td><code>SdOnEKS</code></td>
</tr>
<tr>
<td><code>modelBucketArn</code></td>
<td>S3 bucket for model storage. Models file should be manual populated into the bucket. This parameter applies to all runtimes.</td>
<td>Yes</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>modelsRuntime</code></td>
<td>Define Stable diffusion runtime. At least one runtime should be defined.</td>
<td>Yes</td>
<td><code>- name: "sdruntime"  modelFilename: "v1-5-pruned-emaonly.ckpt"</code></td>
</tr>
<tr>
<td><code>modelsRuntime.name</code></td>
<td>Name of individual Stable diffusion runtime.</td>
<td>Yes</td>
<td><code>sdruntime</code></td>
</tr>
<tr>
<td><code>modelsRuntime.namespace</code></td>
<td>Namespace of individual Stable diffusion runtime.</td>
<td>Yes</td>
<td><code>default</code></td>
</tr>
<tr>
<td><code>modelsRuntime.chartRepository</code></td>
<td>Override default helm chart repository. Protocol (<code>oci://</code> or <code>https://</code>)should be added as a prefix of repository. (Default: <code>https://aws-samples.github.io/stable-diffusion-on-eks</code>)</td>
<td>No</td>
<td>N/A</td>
</tr>
<tr>
<td><code>modelsRuntime.chartVersion</code></td>
<td>Override version of helm chart. (Default: 0.1.0)</td>
<td>No</td>
<td>N/A</td>
</tr>
<tr>
<td><code>modelsRuntime.modelFilename</code></td>
<td>File of model using in the runtime. Filename should be in <code>.ckpt</code> or <code>.safetensors</code> format. Filename should be quoted if contains number only.</td>
<td>Yes</td>
<td><code>v1-5-pruned-emaonly.safetensors</code></td>
</tr>
<tr>
<td><code>modelsRuntime.extraValues</code></td>
<td>Extra parameter passed to the runtime. See <a href="#application-helm-chart">values definition</a> for detail.</td>
<td>No</td>
<td>N/A</td>
</tr>
<tr>
<td><code>dynamicModelRuntime.enabled</code></td>
<td>Generate a runtime which allows models be switched by request. See multi model support for detail.</td>
<td>Yes</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>dynamicModelRuntime.namespace</code></td>
<td>Namespace of dynamic model runtime. Required if <code>dynamicModelRuntime.enabled</code> is <code>true</code>.</td>
<td>No</td>
<td><code>default</code></td>
</tr>
<tr>
<td><code>dynamicModelRuntime.chartRepository</code></td>
<td>Override default helm chart repository. (Default: <code>https://aws-samples.github.io/stable-diffusion-on-eks</code>)</td>
<td>No</td>
<td>N/A</td>
</tr>
<tr>
<td><code>dynamicModelRuntime.chartVersion</code></td>
<td>Override version of helm chart. (Default: 0.1.0)</td>
<td>No</td>
<td>N/A</td>
</tr>
<tr>
<td><code>dynamicModelRuntime.extraValues</code></td>
<td>Extra parameter passed to the runtime. See <a href="#application-helm-chart">values definition</a> for detail.</td>
<td>No</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<h3 id="application-helm-chart">Application (Helm Chart)</h3>
<p>Stable diffusion runtime are deployed via helm chart. You can customize individual stable diffusion runtime by passing values via <code>modelsRuntime.extraValues</code>.</p>
<p>The following table lists the configurable parameters of helm chart and the default values. All values are not mandatory. Please some value will be populated by CDK, and not changeable by user.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Global</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>global.awsRegion</code></td>
<td>AWS region where the stack resides. Not changable.</td>
<td>Populated by CDK</td>
</tr>
<tr>
<td><code>global.stackName</code></td>
<td>Name of CDK stack. Not changable.</td>
<td>Populated by CDK</td>
</tr>
<tr>
<td><strong>Karpenter Provisioner</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>karpenter.provisioner.labels</code></td>
<td>Labels applied to all nodes. Should be in key-values format.</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>karpenter.provisioner.capacityType.onDemand</code></td>
<td>Allow Karpenter to launch on-demand node.</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>karpenter.provisioner.capacityType.spot</code></td>
<td>Allow Karpenter to create spot node. When <code>provisioner.capacityType.onDemand</code> is true, Karpenter will priortize launching Spot instance.</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>karpenter.provisioner.instanceType</code></td>
<td>An array of instance types Karpenter can launch. Should only include instance type available in current region.</td>
<td><code>- "g5.xlarge"</code></td>
</tr>
<tr>
<td><code>karpenter.provisioner.extraRequirements</code></td>
<td>Additional <a href="https://karpenter.sh/preview/concepts/provisioners/#specrequirements">requirement</a> for Karpenter to choose instance type.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>karpenter.provisioner.extraTaints</code></td>
<td>Provisioned nodes will have <code>nvidia.com/gpu:NoSchedule</code> and <code>runtime:NoSchedule</code> taints by default. Use this paremeter for additional taints.</td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>karpenter.provisioner.resourceLimits</code></td>
<td>Resource limits prevent Karpenter from creating new instances once the limit is exceeded. <code>cpu</code>, <code>memory</code> and <code>nvidia.com/gpu</code> are supported.</td>
<td><code>nvidia.com/gpu: 100</code></td>
</tr>
<tr>
<td><code>karpenter.provisioner.consolidation</code></td>
<td>Enables <a href="https://karpenter.sh/preview/concepts/deprovisioning/#consolidation">consolidation</a> which attempts to removing un-needed nodes and down-sizing those that can't be removed.</td>
<td><code>true</code></td>
</tr>
<tr>
<td><strong>Karpenter Node Template</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>karpenter.nodeTemplate.securityGroupSelector</code></td>
<td>Tagged security groups will be attached to instances. Not changable.</td>
<td>Populated by CDK</td>
</tr>
<tr>
<td><code>karpenter.nodeTemplate.subnetSelector</code></td>
<td>Instances will be launched in tagged subnets. Not changable.</td>
<td>Populated by CDK</td>
</tr>
<tr>
<td><code>karpenter.nodeTemplate.tags</code></td>
<td>Tags applied to all nodes. Should be in key-values format.</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>karpenter.nodeTemplate.amiFamily</code></td>
<td>OS option for worker nodes. Karpenter will automatically query for the appropriate EKS optimized AMI via AWS Systems Manager (SSM). <code>AL2</code> and <code>Bottlerocket</code> are supported.</td>
<td><code>Bottlerocket</code></td>
</tr>
<tr>
<td><code>karpenter.nodeTemplate.osVolume</code></td>
<td>Control the Elastic Block Storage (EBS) volumes that Karpenter attaches to provisioned nodes. See <a href="https://karpenter.sh/docs/concepts/node-templates/#specblockdevicemappings">this</a> for schema. This volume will be attached to <code>/dev/xvda</code>.</td>
<td></td>
</tr>
<tr>
<td><code>karpenter.nodeTemplate.dataVolume</code></td>
<td>Control the Elastic Block Storage (EBS) volumes that Karpenter attaches to provisioned nodes. See <a href="https://karpenter.sh/docs/concepts/node-templates/#specblockdevicemappings">this</a> for schema. This volume will be attached to <code>/dev/xvdb</code>. Required when using <code>Bottlerocket</code>.</td>
<td></td>
</tr>
<tr>
<td><code>karpenter.nodeTemplate.userData</code></td>
<td>UserData that is applied to your worker nodes. See <a href="https://github.com/aws/karpenter/tree/main/examples/provisioner/launchtemplates">the examples here</a> for format.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><strong>runtime</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>runtime.labels</code></td>
<td>Labels applied to all resources. Should be in key-values format.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>runtime.annotations</code></td>
<td>Annotations applied to stable diffusion runtime. Should be in key-values format.</td>
<td><code>""</code></td>
</tr>
<tr>
<td><code>runtime.serviceAccountName</code></td>
<td>Name of service account used by runtime. Not changable.</td>
<td>Populated by CDK</td>
</tr>
<tr>
<td><code>runtime.replicas</code></td>
<td>Replica count of runtime.</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>runtime.scaling.enabled</code></td>
<td>Enable auto scaling by SQS length.</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>runtime.scaling.queueLength</code></td>
<td>Target value for queue length. KEDA will scale pod to <code>ApproximateNumberOfMessage / queueLength</code> replicas.</td>
<td><code>10</code></td>
</tr>
<tr>
<td><code>runtime.scaling.cooldownPeriod</code></td>
<td>The period (in seconds) to wait after the last trigger reported active before scaling the resource back to <code>minReplicaCount</code>.</td>
<td><code>60</code></td>
</tr>
<tr>
<td><code>runtime.scaling.maxReplicaCount</code></td>
<td>This setting is passed to the HPA definition that KEDA will create for a given resource and holds the maximum number of replicas of the target resource.</td>
<td><code>20</code></td>
</tr>
<tr>
<td><code>runtime.scaling.minReplicaCount</code></td>
<td>Minimum number of replicas KEDA will scale the resource down to.</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>runtime.scaling.pollingInterval</code></td>
<td>Interval (in seconds) to check each trigger on.</td>
<td><code>1</code></td>
</tr>
<tr>
<td><code>runtime.scaling.scaleOnInFlight</code></td>
<td>When set to <code>true</code>, not visible (in-flight) messages will be counted in <code>ApproximateNumberOfMessage</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>runtime.scaling.extraHPAConfig</code></td>
<td>KEDA would feed values from this section directly to the HPA’s <code>behavior</code> field. Follow <a href="https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/#configurable-scaling-behavior">Kubernetes documentation</a> for details.</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><strong>Stable Diffusion Runtime</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>runtime.inferenceApi.image.repository</code></td>
<td>Image Repository of Runtime.</td>
<td><code>sdoneks/inference-api</code></td>
</tr>
<tr>
<td><code>runtime.inferenceApi.image.tag</code></td>
<td>Image tag of Runtime.</td>
<td><code>latest</code></td>
</tr>
<tr>
<td><code>runtime.inferenceApi.modelFilename</code></td>
<td>Model filename of Runtime. Not changable.</td>
<td>Populated by CDK</td>
</tr>
<tr>
<td><code>runtime.inferenceApi.extraEnv</code></td>
<td>Extra environment variable for Runtime. Should be in <a href="https://kubernetes.io/docs/tasks/inject-data-application/define-environment-variable-container/#define-an-environment-variable-for-a-container">Kubernetes format</a>.</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>runtime.inferenceApi.resources</code></td>
<td>Resource request and limit for Runtime.</td>
<td></td>
</tr>
<tr>
<td><strong>Queue Agent</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>runtime.queueAgent.image.repository</code></td>
<td>Image Repository of queue agent.</td>
<td><code>sdoneks/queue-agent</code></td>
</tr>
<tr>
<td><code>runtime.queueAgent.image.tag</code></td>
<td>Image tag of queue agent.</td>
<td><code>latest</code></td>
</tr>
<tr>
<td><code>runtime.queueAgent.extraEnv</code></td>
<td>Extra environment variable for queue agent. Should be in <a href="https://kubernetes.io/docs/tasks/inject-data-application/define-environment-variable-container/#define-an-environment-variable-for-a-container">Kubernetes format</a>.</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>runtime.queueAgent.dynamicModel</code></td>
<td>Enable model switch by request. Not changable.</td>
<td>Populated by CDK</td>
</tr>
<tr>
<td><code>runtime.queueAgent.s3Bucket</code></td>
<td>S3 bucket for generated image. Not changable.</td>
<td>Populated by CDK</td>
</tr>
<tr>
<td><code>runtime.queueAgent.snsTopicArn</code></td>
<td>SNS topic for image generate complete notification. Not changable.</td>
<td>Populated by CDK</td>
</tr>
<tr>
<td><code>runtime.queueAgent.sqsQueueUrl</code></td>
<td>SQS queue URL of job queue. Not changable.</td>
<td>Populated by CDK</td>
</tr>
<tr>
<td><code>runtime.queueAgent.resources</code></td>
<td>Resource request and limit for queue agent.</td>
<td></td>
</tr>
<tr>
<td><code>runtime.queueAgent.XRay.enabled</code></td>
<td>Enable X-ray tracing agent for queue agent.</td>
<td><code>true</code></td>
</tr>
<tr>
<td><strong>Persistence</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>runtime.persistence.enabled</code></td>
<td>Enable presistence of model stroage.</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>runtime.persistence.labels</code></td>
<td>Labels applied to presistence volume. Should be in key-values format.</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>runtime.persistence.annotations</code></td>
<td>Annotations applied to presistence volume. Should be in key-values format.</td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>runtime.persistence.storageClass</code></td>
<td>Storage class for model storage</td>
<td><code>s3-model-storage-sc</code></td>
</tr>
<tr>
<td><code>runtime.persistence.size</code></td>
<td>Size of persistence volume.</td>
<td><code>2Ti</code></td>
</tr>
<tr>
<td><code>runtime.persistence.accessModes</code></td>
<td>Access mode of persistence volume.</td>
<td><code>ReadWriteMany</code></td>
</tr>
</tbody>
</table>
<h2 id="deployment-examples">Deployment Examples</h2>
<p>We provided example config file for your reference. These config files are located in <code>/examples</code>.</p>
<h3 id="multiple-runtimes">Multiple Runtimes</h3>
<p>You can add multiple runtimes with different models by adding entries in <code>modelsRuntime</code> array. Each runtime should have different <code>modelFilename</code>. We recommand deploying runtimes in their own namespace.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">modelsRuntime</span><span class="p">:</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sdruntime1&quot;</span><span class="w"> </span><span class="c1"># First runtime</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sdruntime1&quot;</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span><span class="nt">modelFilename</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v1-5-pruned-emaonly.safetensors&quot;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sdruntime2&quot;</span><span class="w"> </span><span class="c1"># Second runtime</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sdruntime2&quot;</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">  </span><span class="nt">modelFilename</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;v2-1_768-ema-pruned.safetensors&quot;</span>
</span></code></pre></div>
<p>See <code>multiple-runtimes.yaml</code> for more reference.</p>
<h3 id="dynamic-model-runtime">Dynamic Model Runtime</h3>
<p>By default, models are pre-loaded to runtime. Each runtime only accept request with its model filename. You can create dynamic model runtime as a catch-all option. By enabling dynamic model runtime, a new runtime with default model <code>v1-5-pruned-emaonly.safetensors</code> is created. This runtime will accept all requests without a matching runtime. Then, the runtime will load model by request. Models should be stored in S3 bucket before sending a request with this model.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">dynamicModelRuntime</span><span class="p">:</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"> </span><span class="c1"># Enable dynamic model runtime by change the value to &quot;true&quot;</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default&quot;</span>
</span></code></pre></div>
<p>See <code>dynamic-runtime.yaml</code> for more reference.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>